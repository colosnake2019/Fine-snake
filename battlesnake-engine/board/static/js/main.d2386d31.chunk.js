(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(42)},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(21),o=n(12),c=n(16),u=n(28),s=n(10),l=n(24),h=n.n(l),d="up";function p(e){!function(e){e.Turn=e.Turn||0;var t=!0,n=!1,r=void 0;try{for(var a,i=e.Snakes[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,c=!0,u=!1,s=void 0;try{for(var l,h=o.Body[Symbol.iterator]();!(c=(l=h.next()).done);c=!0){var d=l.value;d.X=d.X||0,d.Y=d.Y||0}}catch(b){u=!0,s=b}finally{try{c||null==h.return||h.return()}finally{if(u)throw s}}}}catch(b){n=!0,r=b}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var p=!0,f=!1,m=void 0;try{for(var v,g=e.Food[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var y=v.value;y.X=y.X||0,y.Y=y.Y||0}}catch(b){f=!0,m=b}finally{try{p||null==g.return||g.return()}finally{if(f)throw m}}}(e);var t,n=m(e.Snakes);return{turn:e.Turn,snakes:n,food:(t=e.Food,t.map(w)),gameOver:O(e)}}function f(e){var t=h()(e);for(var n in t.snakes){var r=t.snakes[n];r.headSvg=null,r.tailSvg=null,r._id=null}return t}function m(e){return e.map(v)}function v(e){return{body:e.Body.map(function(t,n){return function(e,t){var n=e.Body[t],r=e.Body[t-1];return{direction:r?k(n,r):y(e),shouldRender:!b(e,t),type:E(e,t),x:n.X,y:n.Y}}(e,n)}),color:e.Color,_id:e.ID,name:e.Name,health:e.Health,isDead:!!e.Death,death:g(e.Death),head:e.HeadType,tail:e.TailType,headSvg:e.HeadSvg,tailSvg:e.TailSvg}}function g(e){if(e)return{cause:e.Cause,turn:e.Turn||0}}function y(e){return e.Body.length>1?k(e.Body[1],e.Body[0]):d}function b(e,t){var n=e.Body[t],r=e.Body[t-1];return r&&r.X===n.X&&r.Y===n.Y}function w(e){return{x:e.X,y:e.Y}}function k(e,t){return e.X<t.X?"right":t.X<e.X?"left":e.Y<t.Y?"down":"up"}function E(e,t){return 0===t?"head":t===e.Body.length-1?"tail":"body"}function O(e){var t=m(e.Snakes);return 0===t.length||(1===t.length?!!t[0].death:function(e){return e.filter(function(e){return!e.death}).length<=1}(t))}function x(e){if(window.parent)try{window.parent.postMessage(e,"*")}catch(t){console.error(t)}}function S(e){var t=e.split("=");return{key:t[0],value:void 0===t[1]||decodeURIComponent(t[1])}}function j(e){if(!e)return"";var t="?",n="";for(var r in e){var a=e[r];n+="".concat(t).concat(r,"=").concat(a),t="&"}return n}function T(e){var t={http:"ws",https:"wss"};for(var n in t){var r=t[n];if(e.substr(0,n.length+1)===n+":")return r+e.substr(n.length)}throw new Error("Invalid URL: "+e)}function F(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(e,t){var n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,"");return""===n?r:""===r?n:"".concat(n,"/").concat(r)}(e,t)},"")}var R=n(5),C=n(6),_=n(8),M=n(7),G=n(9),P=n(11),B=n(2),H=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,"To run a game you need to specify engine and game parameters in the URL. For example:",a.a.createElement("pre",null,window.location.origin,"?engine=<ENGINE_URL>&game=<GAME_ID>"))}}]),t}(a.a.Component),A="#ff5c75",I="#fefefe",L="#f1f1f1",N="#bbb",U="#efefef",z="#222",X="#6f42c1",D="#f1f1f1",Y="#f8f9fa",K="768px",V="dark",W="light",J=.25,Q=.1,$=20,q=4;function Z(e){return($+q)*e+q}function ee(e){var t="left"===e.direction||"right"===e.direction?q:0;return $+t}function te(e){var t="up"===e.direction||"down"===e.direction?q:0;return $+t}function ne(e){var t="left"===e.direction?-q:0;return Z(e.x)+t}function re(e){var t="up"===e.direction?-q:0;return Z(e.y)+t}function ae(e,t){return t?e._id===t?1:J:e.isDead?Q:1}function ie(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}var oe=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"renderPart",value:function(e,t,n,r,a){switch(n.type){case"head":return this.renderHeadPart(e,t,n,a);case"tail":return this.renderTailPart(e,t,n,a);default:return function(e,t){if(0===t||t===e.body.length-1)return!1;var n=e.body[t+1],r=e.body[t];return(n.x!==r.x||n.y!==r.y)&&n.direction!==r.direction}(e,r)?this.renderCornerPart(e,t,n,r,a):this.renderMiddlePart(e,t,n,r,a)}}},{key:"renderHeadPart",value:function(e,t,n,r){var i=function(e){switch(e.direction){case"left":case"right":default:return Z(e.x)}}(n),o=function(e){switch(e.direction){case"up":case"down":default:return Z(e.y)}}(n),c=e.headSvg.viewBox.baseVal,u=function(e,t){var n=t.width/2,r=t.height/2;switch(e){case"left":return"rotate(180 ".concat(n," ").concat(r,")");case"up":return"rotate(-90 ".concat(n," ").concat(r,")");case"down":return"rotate(90 ".concat(n," ").concat(r,")");default:return""}}(n.direction,c),s="".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height);return a.a.createElement("svg",{key:"part"+t+",head",viewBox:s,x:i,y:o,width:$,height:$,fill:e.color,opacity:ae(e,r),shapeRendering:"optimizeSpeed"},a.a.createElement("g",{transform:u,dangerouslySetInnerHTML:{__html:e.headSvg.innerHTML}}))}},{key:"renderMiddlePart",value:function(e,t,n,r,i){return n.shouldRender?a.a.createElement("rect",{key:"part".concat(t,",").concat(n.x,",").concat(n.y),x:ne(n),y:re(n),width:ee(n),height:te(n),fill:e.color,opacity:ae(e,i),shapeRendering:"optimizeSpeed"}):a.a.createElement("svg",{key:"part"+t+","+r})}},{key:"renderCornerPart",value:function(e,t,n,r,i){if(!n.shouldRender)return a.a.createElement("svg",{key:"part".concat(t,",").concat(n.x,",").concat(n.y),shapeRendering:"optimizeSpeed"});var o,c;switch(n.direction){case"left":case"right":o="0 0 120 100";break;case"up":case"down":default:o="0 0 100 120"}switch(function(e,t){if(0===t||t===e.body.length-1)return!1;var n=e.body[t+1],r=e.body[t];return"".concat(r.direction," ").concat(n.direction)}(e,r)){case"down left":c="scale(-1,1) translate(-100, 0)";break;case"left down":c="rotate(90,0,0) translate(0,-120)";break;case"right down":c="rotate(90,0,0) scale(1,-1)";break;case"up right":c="scale(1,-1) translate(0,-120)";break;case"up left":c="scale(-1,-1) translate(-100,-120)";break;case"right up":c="rotate(-90,0,0) translate(-100,0)";break;case"left up":c="rotate(-90,0,0) scale(1,-1) translate(-100,-120)"}return a.a.createElement("svg",{key:"part".concat(t,",").concat(n.x,",").concat(n.y),x:ne(n),y:re(n),width:ee(n),height:te(n),opacity:ae(e,i),fill:e.color,viewBox:o,shapeRendering:"optimizeSpeed"},a.a.createElement("path",{d:"M0,0 h40 a60,60 0 0 1 61,60 v81 h-101 z",transform:c}))}},{key:"renderTailPart",value:function(e,t,n,r){var i=function(e){switch(e.direction){case"left":return Z(e.x)-q;case"right":return Z(e.x)+q;default:return Z(e.x)}}(n),o=function(e){switch(e.direction){case"up":return Z(e.y)-q;case"down":return Z(e.y)+q;default:return Z(e.y)}}(n),c=e.tailSvg.viewBox.baseVal,u=function(e,t){var n=t.width/2,r=t.height/2;switch(e){case"right":return"rotate(180 ".concat(n," ").concat(r,")");case"down":return"rotate(-90 ".concat(n," ").concat(r,")");case"up":return"rotate(90 ".concat(n," ").concat(r,")");default:return""}}(n.direction,c),s="".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height);return n.shouldRender?a.a.createElement("svg",{key:"part"+t+",tail",viewBox:s,x:i,y:o,width:$,height:$,fill:e.color,opacity:ae(e,r),shapeRendering:"optimizeSpeed"},a.a.createElement("g",{transform:u,dangerouslySetInnerHTML:{__html:e.tailSvg.innerHTML}})):a.a.createElement("svg",{key:"part"+t+",tail"})}},{key:"renderGrid",value:function(){var e=this,t=this.props.snakes||[],n=this.props.food||[],r=t.concat().sort(function(e,t){return(e.isDead?0:1)-(t.isDead?0:1)}),i=Z(this.props.columns),o=Z(this.props.rows);return a.a.createElement("svg",{width:this.props.maxWidth,height:this.props.maxHeight,x:this.props.x,y:this.props.y,viewBox:"0 0 ".concat(i," ").concat(o)},ie(this.props.rows).map(function(t,n){return ie(e.props.columns).map(function(t,r){return a.a.createElement("rect",{key:"cell"+n+","+r,x:Z(r),y:Z(n),width:$,height:$,fill:e.props.theme===V?"#ddd":D,opacity:e.props.highlightedSnake?J:e.props.theme===V?.75:null,shapeRendering:"optimizeSpeed"})})}),r.map(function(t,n){return t.body.map(function(r,a){return e.renderPart(t,n,r,a,e.props.highlightedSnake)})}),n.map(function(t,n){return a.a.createElement("circle",{key:"food"+n,cx:Z(t.x)+$/2,cy:Z(t.y)+$/2,r:$/3.25,fill:A,opacity:e.props.highlightedSnake?J:null,shapeRendering:"optimizeQuality"})}))}},{key:"render",value:function(){return this.props.snakes?this.renderGrid():void 0}}]),t}(a.a.Component),ce=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return a.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100)},a.a.createElement(oe,{snakes:this.props.snakes,food:this.props.food,columns:this.props.columns,rows:this.props.rows,highlightedSnake:this.props.highlightedSnake,theme:this.props.theme,maxWidth:100,maxHeight:100,x:0,y:0}))}}]),t}(a.a.Component),ue=n(1),se=n.n(ue),le=n(3);function he(e,t){var n=!1;return new Promise(function(r,a){var i=new WebSocket(e);i.addEventListener("message",function(e){var a=JSON.parse(e.data);(n=t(a))&&(i.close(),r())}),i.addEventListener("onerror",function(e){a(e)}),i.addEventListener("onclose",function(e){n||(n=!0,r())})})}var de={};function pe(e){return de[e]}function fe(e){return e in de?Promise.resolve(de[e]):function(e){return me.apply(this,arguments)}(e)}function me(){return(me=Object(le.a)(se.a.mark(function e(t){var n,r,a;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,a=ve(r),de[t]=a,e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ve(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}var ge="tongue",ye="bolt";function be(){return(be=Object(le.a)(se.a.mark(function e(t,n){var r;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t+j(n));case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function we(e){return new Promise(function(t){return setTimeout(t,e)})}function ke(e){var t=e.reduce(function(e,t){return e.concat([t.HeadType,t.TailType])},[]),n=new Set(t);return Array.from(n)}function Ee(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.HeadType||(o.HeadType=ge),o.TailType||(o.TailType=ye),o.HeadType=Te(o.HeadType),o.TailType=Fe(o.TailType)}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}function Oe(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(le.a)(se.a.mark(function e(t){var n,r,a,i,o,c;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ee(t),e.next=3,u=ke(t),Promise.all(u.map(fe));case 3:for(n=!0,r=!1,a=void 0,e.prev=6,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)(c=o.value).HeadSvg=pe(c.HeadType),c.TailSvg=pe(c.TailType);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),r=!0,a=e.t0;case 14:e.prev=14,e.prev=15,n||null==i.return||i.return();case 17:if(e.prev=17,!r){e.next=20;break}throw a;case 20:return e.finish(17);case 21:return e.finish(14);case 22:case"end":return e.stop()}var u},e,this,[[6,10,14,22],[15,,17,21]])}))).apply(this,arguments)}function Se(e){return e.indexOf("/")>=0||e.indexOf(".")>=0}function je(e,t){return F(e,t)+".svg"}function Te(e){return je("images/snake/head",Se(e)?ge:e)}function Fe(e){return je("images/snake/tail",Se(e)?ye:e)}function Re(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(le.a)(se.a.mark(function e(t){return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(t.Snakes);case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _e(e,t){return function(e,t){return be.apply(this,arguments)}(F(e,"games/".concat(t)))}function Me(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(le.a)(se.a.mark(function e(t,n){var r;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=F(t,"games/".concat(n,"/start")),e.next=3,fetch(r,{method:"POST",cache:"no-cache"});case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Pe(e,t,n){return Be.apply(this,arguments)}function Be(){return(Be=Object(le.a)(se.a.mark(function e(t,n,r){var a,i,o,c;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){return i=i.then(Object(le.a)(se.a.mark(function t(){return se.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Re(e);case 2:return t.abrupt("return",r(a,e));case 3:case"end":return t.stop()}},t,this)}))),O(e)},e.next=3,_e(t,n);case 3:return a=e.sent,i=Promise.resolve(),c=F(T(t),"socket/".concat(n)),e.next=8,he(c,o);case 8:return e.next=10,i;case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function He(e,t){return e.filter(function(e){return e.turn===t})[0]}var Ae=Object(B.a)("div")({marginBottom:".5rem",paddingTop:"1rem",width:"100%",paddingBottom:"1rem"}),Ie=Object(B.a)("span")({display:"block",paddingBottom:"1rem"}),Le=Object(B.a)("div")({width:"100%",height:"1.8rem",background:I,borderRadius:"1.5rem"}),Ne=Object(B.a)("div")(function(e){return{height:"100%",backgroundColor:e.color,borderRadius:"inherit"}}),Ue=Object(B.a)("div")(function(e){return{height:"100%",padding:".2rem .5rem",fontSize:"1.2rem",backgroundColor:e.theme===V?N:L,borderRadius:"inherit",color:z}}),ze=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return a.a.createElement(Ae,null,a.a.createElement(Ie,null,this.props.snake.name),a.a.createElement(Le,null,this.props.snake.death?a.a.createElement(Ue,{theme:this.props.theme},function(e){switch(e){case"snake-collision":return"Collided with snake body";case"snake-self-collision":return"Collided with own body";case"starvation":return"Starvation";case"head-collision":return"Head on head collision";case"wall-collision":return"Collided with a wall";default:return e}}(this.props.snake.death.cause)):a.a.createElement(Ne,{color:this.props.snake.color,style:{width:"".concat(this.props.snake.health,"%")}})))}}]),t}(a.a.Component);function Xe(){var e=Object(P.a)(["\n  transition: background-color 0.2s, box-shadow 0.2s;\n  box-shadow: ",";\n\n  &:hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n"]);return Xe=function(){return e},e}function De(){var e=Object(P.a)(["\n  display: none;\n  padding-right: 2rem;\n  color: ",";\n  font-weight: 700;\n  font-size: 2.2rem;\n\n  @media (min-width: ",") {\n    display: ",";\n  }\n"]);return De=function(){return e},e}var Ye=Object(B.a)("div")(De(),function(e){return e.theme===V?U:z},K,function(e){return e.hide?"none":"block"}),Ke=Object(B.a)("div")(Xe(),function(e){return e.highlighted?"0 0 0 1px ".concat(U):null},function(e){return e.theme===V?X:Y}),Ve=function(e){function t(){var e,n;Object(R.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(a)))).state={highlightedSnake:null},n.toggleHighlight=function(e){var t=function(e,t){return e.highlightedSnake!==t._id?t._id:null};n.props.highlightSnake(t(n.state,e)),n.setState(function(n){return{highlightedSnake:t(n,e)}})},n}return Object(G.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this,t=this.state.highlightedSnake;return a.a.createElement(Ye,{theme:this.props.theme},this.props.snakes?function(e){var t=e.filter(function(e){return!e.isDead}).sort(function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n<r?-1:n>r?1:0}),n=e.filter(function(e){return e.isDead}).sort(function(e,t){return e.death.turn-t.death.turn}).reverse();return t.concat(n)}(this.props.snakes).map(function(n,r){return a.a.createElement(Ke,{key:"avatarwrapper"+r,onClick:function(){return e.toggleHighlight(n)},highlighted:t===n._id,theme:e.props.theme},a.a.createElement(ze,{snake:n,key:"avatar"+r,theme:e.props.theme}))}):void 0)}}]),t}(a.a.Component),We=n(26),Je=n.n(We);function Qe(){var e=Object(P.a)(["\n  display: inline-block;\n  min-width: 10rem;\n  text-align: center;\n  color: #333;\n  font-size: 1.6rem;\n  border: none;\n  text-decoration: none;\n  text-align: center;\n  cursor: pointer;\n  transition: background 250ms ease-in-out, transform 150ms ease;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &:disabled {\n    color: #ccc;\n    cursor: not-allowed;\n  }\n"]);return Qe=function(){return e},e}function $e(){var e=Object(P.a)(["\n  display: none;\n  margin-top: 1rem;\n  width: 100%;\n\n  @media (min-width: ",") {\n    display: ",";\n  }\n"]);return $e=function(){return e},e}var qe=Object(B.a)("div")($e(),K,function(e){return e.hide?"none":"block"}),Ze=Object(B.a)("div")({display:"flex",justifyContent:"center",width:"100%",marginBottom:"2rem",color:"#777"}),et=Object(B.a)("div")({display:"flex",justifyContent:"center",width:"100%"}),tt=Object(B.a)("button")(Qe()),nt=function(e){function t(){var e,n;Object(R.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(a)))).handleReload=function(){n.props.reloadGame()},n.handlePlayPause=function(){n.props.toggleGamePause()},n.handleBackward=function(){n.props.stepBackwardFrame()},n.handleForward=function(){n.props.stepForwardFrame()},n.handleKeyEvent=function(e){switch(e){case"r":n.handleReload();break;case"left":n.handleBackward();break;case"right":n.handleForward();break;case"space":n.handlePlayPause()}},n}return Object(G.a)(t,e),Object(C.a)(t,[{key:"componentWillMount",value:function(){this.keyEvents=["r","left","right","space"]}},{key:"render",value:function(){return this.renderControls()}},{key:"renderControls",value:function(){var e=this.props,t=e.currentFrame,n=e.hideControls,r=e.paused;return a.a.createElement(qe,{hide:n},a.a.createElement(Ze,null,"Turn: ",t.turn),a.a.createElement(et,null,a.a.createElement(tt,{onClick:this.handleReload,disabled:0===t.turn||!r},"Reload"),a.a.createElement(tt,{onClick:this.handlePlayPause},r?"Play":"Pause"),a.a.createElement(tt,{onClick:this.handleBackward,disabled:0===t.turn||!r},"Backward"),a.a.createElement(tt,{onClick:this.handleForward,disabled:!r},"Forward"),a.a.createElement(Je.a,{handleKeys:this.keyEvents,onKeyEvent:this.handleKeyEvent})))}}]),t}(a.a.Component);function rt(){var e=Object(P.a)(["\n  display: none;\n  width: 35vw;\n  margin-left: 2rem;\n\n  @media (min-width: ",") {\n    display: ",";\n  }\n"]);return rt=function(){return e},e}function at(){var e=Object(P.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n\n  @media (min-width: ",") {\n    width: ",";\n  }\n"]);return at=function(){return e},e}function it(){var e=Object(P.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  background: ",";\n  background: ",";\n"]);return it=function(){return e},e}var ot,ct=Object(B.a)("div")(it(),function(e){return e.theme===V?X:"transparent"},function(e){return e.theme===V?"linear-gradient(45deg, #000 0%, ".concat(X," 100%)"):"transparent"}),ut=Object(B.a)("div")({display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"}),st=Object(B.a)("div")({display:"flex",justifyContent:"space-between",width:"100%",height:"100%"}),lt=Object(B.a)("div")(at(),K,function(e){return e.hideScoreboard?"100%":"65vw"}),ht=Object(B.a)("div")(rt(),K,function(e){return e.hide?"none":"block"}),dt=function(e){function t(){return Object(R.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(C.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.options;this.theme=this.props.options.boardTheme?this.props.options.boardTheme:W,e.game&&e.engine?(this.hideScoreboard="true"===this.props.options.hideScoreboard,this.props.setEngineOptions(e),this.props.fetchFrames()):this.invalidArgs=!0}},{key:"render",value:function(){return this.invalidArgs?a.a.createElement(H,null):this.props.currentFrame?this.renderGame():a.a.createElement(ut,null,a.a.createElement("div",{className:"la-ball-grid-beat la-dark la-2x",style:{color:A}},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null)))}},{key:"renderGame",value:function(){return a.a.createElement(ct,{theme:this.theme},a.a.createElement(st,null,a.a.createElement(lt,{hideScoreboard:this.hideScoreboard},a.a.createElement(ce,{snakes:this.props.currentFrame.snakes,food:this.props.currentFrame.food,columns:this.props.grid.width,rows:this.props.grid.height,highlightedSnake:this.props.highlightedSnake,theme:this.theme}),a.a.createElement(nt,{currentFrame:this.props.currentFrame,hideControls:"true"===this.props.options.hideMediaControls,reloadGame:this.props.reloadGame,toggleGamePause:this.props.toggleGamePause,stepBackwardFrame:this.props.stepBackwardFrame,stepForwardFrame:this.props.stepForwardFrame,paused:this.props.paused})),!this.hideScoreboard&&a.a.createElement(ht,null,a.a.createElement(Ve,{turn:this.props.currentFrame.turn,snakes:this.props.currentFrame.snakes,food:this.props.currentFrame.food,highlightSnake:this.props.highlightSnake,theme:this.theme}))))}}]),t}(a.a.Component),pt=function(e,t){return{type:"RECEIVE_FRAME",game:e,frame:t}},ft=function(e){return{type:"SET_CURRENT_FRAME",frame:e}},mt=function(){return function(){var e=Object(le.a)(se.a.mark(function e(t,n){var r,a,i,o,c,u,s;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().engineOptions,a=r.autoplay,i=r.engine,o=r.game,c=r.turn,t({type:"REQUEST_FRAMES"}),e.next=4,Pe(i,o,function(e,r){if(t({type:"SET_GAME_STATUS",status:e.Game.Status}),r.Turn=r.Turn||0,t(pt(e,r)),0===r.Turn){var a=n().frames[0];t(ft(a))}});case 4:a&&(u=n().frames[0],t({type:"RESUME_GAME"}),t(vt(u))),c&&c<=n().frames.length&&(s=n().frames[c],t(ft(s)));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},vt=function e(t){return function(){var n=Object(le.a)(se.a.mark(function n(r,a){var i,o,c,u,s,l,h,d,p,f,m,v,g;return se.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=a().engineOptions.frameRate,o=a().frames.slice(),c=o.indexOf(t),u=o.slice(c),s=Math.ceil(i||20),l=1e3/s,h=!0,d=!1,p=void 0,n.prev=9,f=u[Symbol.iterator]();case 11:if(h=(m=f.next()).done){n.next=21;break}if(v=m.value,!a().paused){n.next=15;break}return n.abrupt("return");case 15:return r(ft(v)),n.next=18,we(l);case 18:h=!0,n.next=11;break;case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(9),d=!0,p=n.t0;case 27:n.prev=27,n.prev=28,h||null==f.return||f.return();case 30:if(n.prev=30,!d){n.next=33;break}throw p;case 33:return n.finish(30);case 34:return n.finish(27);case 35:(g=u[u.length-1]).gameOver?a().paused||r({type:"GAME_OVER"}):r(e(g));case 37:case"end":return n.stop()}},n,this,[[9,23,27,35],[28,,30,34]])}));return function(e,t){return n.apply(this,arguments)}}()},gt=(ot=window.location.search)&&ot.length?ot.substr(1).split("&").map(S).reduce(function(e,t){return e[t.key]=t.value,e},{}):{},yt=Object(c.b)(function(e){return{options:gt,grid:e.grid,paused:e.paused,currentFrame:e.currentFrame,frames:e.frames,highlightedSnake:e.highlightedSnake,gameStatus:e.gameStatus}},function(e){return{setEngineOptions:function(t){return e({type:"SET_ENGINE_OPTIONS",engineOptions:t})},fetchFrames:function(){return e(mt())},reloadGame:function(){return e(function(){var e=Object(le.a)(se.a.mark(function e(t,n){var r,a,i;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.frames,r.paused&&(i=He(a,0),t(ft(i)));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},toggleGamePause:function(t){return e(function(){var e=Object(le.a)(se.a.mark(function e(t,n){var r,a,i,o,c;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.currentFrame,i=r.gameStatus,o=r.paused,c=r.engineOptions,!o){e.next=10;break}if("stopped"!==i){e.next=6;break}return e.next=5,Me(c.engine,c.game);case 5:t(mt());case 6:t({type:"RESUME_GAME"}),t(vt(a)),e.next=11;break;case 10:t({type:"PAUSE_GAME"});case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},stepForwardFrame:function(){return e(function(){var e=Object(le.a)(se.a.mark(function e(t,n){var r,a,i,o,c;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.currentFrame,i=r.frames,o=a.turn+1,(c=He(i,o))&&t(ft(c));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},stepBackwardFrame:function(){return e(function(){var e=Object(le.a)(se.a.mark(function e(t,n){var r,a,i,o,c;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.currentFrame,i=r.frames,o=a.turn-1,(c=He(i,o))&&t(ft(c));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},highlightSnake:function(t){return e(function(e){return{type:"HIGHLIGHT_SNAKE",snakeId:e}}(t))}}})(dt),bt=n(27),wt=Object(o.a)(bt.a),kt=Object(o.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ENGINE_OPTIONS":return t.engineOptions.autoplay=t.engineOptions.autoplay&&"true"===t.engineOptions.autoplay,t.engineOptions.turn=parseInt(t.engineOptions.turn)||0,Object(s.a)({},e,{engineOptions:t.engineOptions});case"PAUSE_GAME":case"GAME_OVER":return Object(s.a)({},e,{paused:!0});case"RESUME_GAME":return Object(s.a)({},e,{paused:!1});case"SET_GAME_STATUS":return Object(s.a)({},e,{gameStatus:t.status});case"SET_CURRENT_FRAME":return x({action:t.type,frame:f(t.frame)}),Object(s.a)({},e,{currentFrame:t.frame});case"RECEIVE_FRAME":var n=p(t.frame);return Object(s.a)({},e,{grid:{height:t.game.Game.Height,width:t.game.Game.Width},frames:[].concat(Object(u.a)(e.frames),[n])});case"REQUEST_FRAMES":case"FETCH_FRAMES":return Object(s.a)({},e);case"HIGHLIGHT_SNAKE":return x({action:t.type,id:t.snakeId,name:t.snakeId?e.currentFrame.snakes.find(function(e){return e._id===t.snakeId}).name:null}),Object(s.a)({},e,{highlightedSnake:t.snakeId});default:return Object(s.a)({},e)}},{options:null,grid:[],frames:[],paused:!0,highlightedSnake:null},wt);Object(i.render)(a.a.createElement(c.a,{store:kt},a.a.createElement(yt,null)),document.getElementById("root"))}},[[30,2,1]]]);
//# sourceMappingURL=main.d2386d31.chunk.js.map